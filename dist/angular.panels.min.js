!function(e){"use strict";var n=e.module("angular.panels",[]);n.constant("panelList",{}),n.provider("panels",["panelList",function(n){this.add=function(e){return e&&e.id&&(e.hasOwnProperty("dim")||(e.dim=!0),n[e.id]=e),this},this.$get=["$parse",function(t){var o=e.element(document.body),i={opened:void 0,open:function(e){if(o.addClass("overflow-hidden"),i.opened&&i.close(i.opened),e&&n[e]){var s=n[e],a=s.element,l=a.scope(),c=t(s.openCallbackFunction)(l);a.attr("style",i.style(s,!0)),"function"==typeof c&&c(),i.dim=s.dim}i.opened=e},close:function(){if(o.removeClass("overflow-hidden"),i.opened&&n[i.opened]){var e=n[i.opened],s=e.element,a=s.scope(),l=t(e.closeCallbackFunction)(a);s.attr("style",i.style(e,!1)),"function"==typeof l&&l()}i.opened=void 0,i.dim=void 0},style:function(e,n){switch(e.position){case"top":case"bottom":return e.position+":"+(n?"0;":"-"+e.size+";")+"height:"+e.size;case"left":case"right":return e.position+":"+(n?"0;":"-"+e.size+";")+"width:"+e.size}}};return i}]}]),n.directive("panels",["$http","$templateCache","$compile","panels","panelList",function(n,t,o,i,s){return{restrict:"A",scope:{},controller:["$scope",function(e){e.panels=i}],link:function(a,l,c){e.forEach(s,function(c,p){n.get(c.templateUrl,{cache:t}).success(function(n){var n='<div style="'+i.style(c)+'" class="panels panel-'+c.position+'" data-ng-class="{open : panels.opened==\''+c.id+'\'}"  data-ng-controller="'+c.controller+'">'+n+"</div>",t=o(n)(a);l.append(t),s[p].element=e.element(t)})}),l.append(o('<div class="dimming" data-ng-class="{open : panels.dim}" data-ng-click="panels.close();"></div>')(a))}}}])}(angular);